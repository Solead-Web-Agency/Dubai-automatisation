<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dubai Immo – Générateur de visuels</title>
    <style>
      :root{ --bg:#0b1220; --panel:#0f172a; --muted:#94a3b8; --text:#e2e8f0; --accent:#38bdf8 }
      *{box-sizing:border-box}
      body{margin:0;background:linear-gradient(180deg,#0b1220 0%,#0a0f1e 100%);color:var(--text);font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
      .wrap{min-height:100dvh;display:grid;place-items:center;padding:24px}
      .card{width:min(980px,100%);background:#0f172a;border:1px solid #1f2937;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35);overflow:hidden}
      .header{display:flex;align-items:center;gap:16px;padding:18px 22px;border-bottom:1px solid #1f2937;background:rgba(255,255,255,.02)}
      .header img{height:40px;width:auto;display:block}
      .header h1{margin:0;font-size:18px;letter-spacing:.3px}
      .tabs{display:flex;gap:8px;padding:12px 22px;border-bottom:1px solid #1f2937;background:rgba(255,255,255,.02)}
      .tab{appearance:none;border:1px solid #1f2937;background:#0b1020;color:var(--text);padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer}
      .tab.active{background:#0b2540;border-color:#1e3a8a;color:#e0f2fe}
      .body{display:grid;grid-template-columns:1.2fr .8fr;gap:24px;padding:22px}
      @media (max-width: 900px){.body{grid-template-columns:1fr}}
      form .field{margin:12px 0}
      label{display:block;margin:0 0 6px 2px;color:var(--muted);font-size:14px}
      input{width:100%;padding:14px 14px;border-radius:10px;background:#0b1020;border:1px solid #1f2937;color:var(--text);font-size:16px;outline:none}
      input:focus{border-color:#334155;box-shadow:0 0 0 3px rgba(51,65,85,.25)}
      .actions{display:flex;gap:12px;margin-top:10px}
      button,a.btn{appearance:none;border:0;border-radius:10px;padding:12px 16px;font-weight:600;cursor:pointer;text-decoration:none;display:inline-block}
      .primary{background:#10b981;color:white}
      .ghost{background:transparent;border:1px solid #334155;color:var(--text)}
      .aside{border-left:1px solid #1f2937;padding-left:22px}
      .aside h3{margin:0 0 10px;font-size:15px;color:#cbd5e1}
      .hint{color:var(--muted);font-size:14px;line-height:1.6}
      .code{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas; background:#0b1020;border:1px solid #1f2937;border-radius:8px;padding:2px 6px;color:#f1f5f9}
      .footer{padding:14px 22px;border-top:1px solid #1f2937;color:#9aa7b9;font-size:13px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:8px}
      a{color:var(--accent)}
      .hidden{display:none}
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="card">
        <div class="header">
          <img src="/api/logo" alt="Dubai Immo" />
          <h1>Configurer le texte – Générateur de visuels</h1>
        </div>
        <div class="tabs">
          <button class="tab active" data-target="#form-square">Carré</button>
          <button class="tab" data-target="#form-story">Story</button>
        </div>
        <div class="body">
          <section class="main">
            <!-- Form Carré -->
            <form id="form-square" class="pane" method="POST" action="/api/text-square">
              <div class="field"><label for="sq-line1">Ligne 1</label><input id="sq-line1" name="line1" placeholder="NOUVEAU PROJET" /></div>
              <div class="field"><label for="sq-line2">Ligne 2</label><input id="sq-line2" name="line2" placeholder="APPARTEMENT 70M2" /></div>
              <div class="field"><label for="sq-line3">Ligne 3</label><input id="sq-line3" name="line3" placeholder="À DUBAI DÈS 250.000€" /></div>
              <div class="actions"><button class="primary" type="submit">Enregistrer et lancer</button><a class="btn ghost" href="/api/check-gmail" target="_blank" rel="noopener">Vérifier</a></div>
            </form>
            <!-- Form Story -->
            <form id="form-story" class="pane hidden" method="POST" action="/api/text-story">
              <div class="field"><label for="st-line1">Ligne 1</label><input id="st-line1" name="line1" placeholder="NOUVEAU PROJET" /></div>
              <div class="field"><label for="st-line2">Ligne 2</label><input id="st-line2" name="line2" placeholder="APPARTEMENT 70M2" /></div>
              <div class="field"><label for="st-line3">Ligne 3</label><input id="st-line3" name="line3" placeholder="À DUBAI DÈS 250.000€" /></div>
              <div class="actions"><button class="primary" type="submit">Enregistrer et lancer</button><a class="btn ghost" href="/api/check-gmail" target="_blank" rel="noopener">Vérifier</a></div>
            </form>
          </section>
          <aside class="aside">
            <h3>Astuce</h3>
            <p class="hint">
              - Uppercase automatique.<br/>
              - Rouge inline: <span class="code">red:MOT</span> ou <span class="code">[[MOT]]</span> (ex: <span class="code">NOUVEAU red:PROJET</span>).<br/>
              - Ligne vide = non affichée (aucun fallback).<br/>
              - Les textes s’alignent selon le format sélectionné.
            </p>
          </aside>
        </div>
        <div class="footer">
          <span>Dubai Immo – Générateur de visuels</span>
          <span><a href="/api/text-square">Carré</a> · <a href="/api/text-story">Story</a></span>
        </div>
      </div>
    </div>
    <script>
      const tabs = document.querySelectorAll('.tab');
      const square = document.querySelector('#form-square');
      const story = document.querySelector('#form-story');
      tabs.forEach(btn=>{
        btn.addEventListener('click', ()=>{
          tabs.forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          const target = btn.dataset.target;
          if(target === '#form-square'){ square.classList.remove('hidden'); story.classList.add('hidden'); }
          else { story.classList.remove('hidden'); square.classList.add('hidden'); }
        });
      });
    </script>
  </body>
</html>
